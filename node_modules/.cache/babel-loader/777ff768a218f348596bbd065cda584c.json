{"ast":null,"code":"var _jsxFileName = \"E:\\\\anipfspace\\\\src\\\\views\\\\app\\\\App.js\";\nimport './App.css';\nimport * as React from \"react\";\nimport { getLocalUserIdentity } from \"../../common/user\";\nimport { bucketLinks, getBucketKey } from \"../../common/bucket\";\nimport Landing from \"./Landing\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userIdentity: null,\n      loadingUserIdentity: false\n    };\n  }\n\n  async componentWillMount() {\n    const beginTime = new Date().getTime() / 1000;\n    const localUserIdentity = await getLocalUserIdentity();\n    this.setState({\n      userIdentity: localUserIdentity\n    });\n\n    if (localUserIdentity != null) {\n      const {\n        bucketKey,\n        buckets\n      } = await getBucketKey(localUserIdentity);\n      const links = await bucketLinks(buckets, bucketKey);\n      const query = {\n        bucketKey: bucketKey,\n        buckets: buckets,\n        links: links\n      };\n      this.props.history.push({\n        pathname: \"/dashBoard\",\n        query: query\n      });\n    } else {\n      let loading = document.getElementById('loader');\n\n      if (!loading) {\n        return;\n      }\n\n      loading.style.display = 'inline-block';\n      loading.style.display = 'none';\n      this.setState({\n        loadingUserIdentity: true\n      });\n    }\n  }\n\n  render() {\n    if (this.state.loadingUserIdentity) {\n      if (this.state.userIdentity == null) {\n        return /*#__PURE__*/_jsxDEV(Landing, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 24\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this);\n      }\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["E:/anipfspace/src/views/app/App.js"],"names":["React","getLocalUserIdentity","bucketLinks","getBucketKey","Landing","App","Component","constructor","props","state","userIdentity","loadingUserIdentity","componentWillMount","beginTime","Date","getTime","localUserIdentity","setState","bucketKey","buckets","links","query","history","push","pathname","loading","document","getElementById","style","display","render"],"mappings":";AAAA,OAAO,WAAP;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAAQC,oBAAR,QAAmC,mBAAnC;AACA,SAAQC,WAAR,EAAqBC,YAArB,QAAwC,qBAAxC;AACA,OAAOC,OAAP,MAAoB,WAApB;;;AAEA,MAAMC,GAAN,SAAoBL,KAAK,CAACM,SAA1B,CAAmC;AAC/BC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,YAAY,EAAG,IADN;AAETC,MAAAA,mBAAmB,EAAG;AAFb,KAAb;AAIH;;AAEuB,QAAlBC,kBAAkB,GAAG;AACvB,UAAMC,SAAS,GAAG,IAAIC,IAAJ,GAAWC,OAAX,KAAqB,IAAvC;AACA,UAAMC,iBAAiB,GAAG,MAAMf,oBAAoB,EAApD;AACA,SAAKgB,QAAL,CAAc;AACNP,MAAAA,YAAY,EAACM;AADP,KAAd;;AAIA,QAAGA,iBAAiB,IAAE,IAAtB,EAA2B;AACvB,YAAM;AAACE,QAAAA,SAAD;AAAYC,QAAAA;AAAZ,UAAuB,MAAMhB,YAAY,CAACa,iBAAD,CAA/C;AACA,YAAMI,KAAK,GAAG,MAAMlB,WAAW,CAACiB,OAAD,EAASD,SAAT,CAA/B;AACA,YAAMG,KAAK,GAAG;AACVH,QAAAA,SAAS,EAACA,SADA;AAEVC,QAAAA,OAAO,EAACA,OAFE;AAGVC,QAAAA,KAAK,EAACA;AAHI,OAAd;AAKA,WAAKZ,KAAL,CAAWc,OAAX,CAAmBC,IAAnB,CAAwB;AAACC,QAAAA,QAAQ,EAAE,YAAX;AAAwBH,QAAAA,KAAK,EAAGA;AAAhC,OAAxB;AACH,KATD,MASK;AACD,UAAII,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAd;;AACA,UAAI,CAACF,OAAL,EAAc;AACV;AACH;;AACDA,MAAAA,OAAO,CAACG,KAAR,CAAcC,OAAd,GAAsB,cAAtB;AAEAJ,MAAAA,OAAO,CAACG,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACA,WAAKZ,QAAL,CAAc;AACVN,QAAAA,mBAAmB,EAAC;AADV,OAAd;AAGH;AACJ;;AAEDmB,EAAAA,MAAM,GAAG;AACL,QAAI,KAAKrB,KAAL,CAAWE,mBAAf,EAAoC;AAChC,UAAI,KAAKF,KAAL,CAAWC,YAAX,IAA2B,IAA/B,EAAqC;AACjC,4BAAO,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,gBAAP;AACH,OAFD,MAEO;AACH,4BACI;AAAA;AAAA;AAAA;AAAA,gBADJ;AAGH;AACJ,KARD,MAQO;AACH,0BACI;AAAA;AAAA;AAAA;AAAA,cADJ;AAGH;AACJ;;AArD8B;;AAyDnC,eAAeL,GAAf","sourcesContent":["import './App.css';\r\nimport * as React from \"react\";\r\nimport {getLocalUserIdentity} from \"../../common/user\";\r\nimport {bucketLinks, getBucketKey} from \"../../common/bucket\";\r\nimport Landing from \"./Landing\";\r\n\r\nclass App  extends  React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            userIdentity : null,\r\n            loadingUserIdentity : false\r\n        }\r\n    }\r\n\r\n    async componentWillMount() {\r\n        const beginTime = new Date().getTime()/1000;\r\n        const localUserIdentity = await getLocalUserIdentity();\r\n        this.setState({\r\n                userIdentity:localUserIdentity\r\n            }\r\n        );\r\n        if(localUserIdentity!=null){\r\n            const {bucketKey, buckets} = await getBucketKey(localUserIdentity);\r\n            const links = await bucketLinks(buckets,bucketKey);\r\n            const query = {\r\n                bucketKey:bucketKey,\r\n                buckets:buckets,\r\n                links:links,\r\n            };\r\n            this.props.history.push({pathname: \"/dashBoard\",query : query})\r\n        }else{\r\n            let loading = document.getElementById('loader');\r\n            if (!loading) {\r\n                return;\r\n            }\r\n            loading.style.display='inline-block';\r\n\r\n            loading.style.display = 'none';\r\n            this.setState({\r\n                loadingUserIdentity:true\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loadingUserIdentity) {\r\n            if (this.state.userIdentity == null) {\r\n                return <Landing/>\r\n            } else {\r\n                return (\r\n                    <div/>\r\n                );\r\n            }\r\n        } else {\r\n            return (\r\n                <div/>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}