{"ast":null,"code":"import { createAPISig } from '@textile/security';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn) {\n  var module = {\n    exports: {}\n  };\n  return fn(module, module.exports), module.exports;\n}\n\nvar grpcWebClient_umd = createCommonjsModule(function (module, exports) {\n  !function (e, t) {\n    module.exports = t();\n  }(commonjsGlobal, function () {\n    return function (e) {\n      var t = {};\n\n      function r(n) {\n        if (t[n]) return t[n].exports;\n        var o = t[n] = {\n          i: n,\n          l: !1,\n          exports: {}\n        };\n        return e[n].call(o.exports, o, o.exports, r), o.l = !0, o.exports;\n      }\n\n      return r.m = e, r.c = t, r.d = function (e, t, n) {\n        r.o(e, t) || Object.defineProperty(e, t, {\n          enumerable: !0,\n          get: n\n        });\n      }, r.r = function (e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(e, \"__esModule\", {\n          value: !0\n        });\n      }, r.t = function (e, t) {\n        if (1 & t && (e = r(e)), 8 & t) return e;\n        if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n        var n = Object.create(null);\n        if (r.r(n), Object.defineProperty(n, \"default\", {\n          enumerable: !0,\n          value: e\n        }), 2 & t && \"string\" != typeof e) for (var o in e) r.d(n, o, function (t) {\n          return e[t];\n        }.bind(null, o));\n        return n;\n      }, r.n = function (e) {\n        var t = e && e.__esModule ? function () {\n          return e.default;\n        } : function () {\n          return e;\n        };\n        return r.d(t, \"a\", t), t;\n      }, r.o = function (e, t) {\n        return Object.prototype.hasOwnProperty.call(e, t);\n      }, r.p = \"\", r(r.s = 10);\n    }([function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n      var n = r(3);\n      t.Metadata = n.BrowserHeaders;\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      }), t.debug = function () {\n        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];\n\n        console.debug ? console.debug.apply(null, e) : console.log.apply(null, e);\n      };\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n      var n = r(0),\n          o = r(8),\n          s = r(9),\n          i = r(1),\n          a = r(4),\n          u = r(14);\n\n      t.client = function (e, t) {\n        return new d(e, t);\n      };\n\n      var d = function () {\n        function e(e, t) {\n          this.started = !1, this.sentFirstMessage = !1, this.completed = !1, this.closed = !1, this.finishedSending = !1, this.onHeadersCallbacks = [], this.onMessageCallbacks = [], this.onEndCallbacks = [], this.parser = new o.ChunkParser(), this.methodDefinition = e, this.props = t, this.createTransport();\n        }\n\n        return e.prototype.createTransport = function () {\n          var e = this.props.host + \"/\" + this.methodDefinition.service.serviceName + \"/\" + this.methodDefinition.methodName,\n              t = {\n            methodDefinition: this.methodDefinition,\n            debug: this.props.debug || !1,\n            url: e,\n            onHeaders: this.onTransportHeaders.bind(this),\n            onChunk: this.onTransportChunk.bind(this),\n            onEnd: this.onTransportEnd.bind(this)\n          };\n          this.props.transport ? this.transport = this.props.transport(t) : this.transport = a.makeDefaultTransport(t);\n        }, e.prototype.onTransportHeaders = function (e, t) {\n          if (this.props.debug && i.debug(\"onHeaders\", e, t), this.closed) this.props.debug && i.debug(\"grpc.onHeaders received after request was closed - ignoring\");else if (0 === t) ;else {\n            this.responseHeaders = e, this.props.debug && i.debug(\"onHeaders.responseHeaders\", JSON.stringify(this.responseHeaders, null, 2));\n            var r = c(e);\n            this.props.debug && i.debug(\"onHeaders.gRPCStatus\", r);\n            var n = r && r >= 0 ? r : s.httpStatusToCode(t);\n            this.props.debug && i.debug(\"onHeaders.code\", n);\n            var o = e.get(\"grpc-message\") || [];\n\n            if (this.props.debug && i.debug(\"onHeaders.gRPCMessage\", o), this.rawOnHeaders(e), n !== s.Code.OK) {\n              var a = this.decodeGRPCStatus(o[0]);\n              this.rawOnError(n, a, e);\n            }\n          }\n        }, e.prototype.onTransportChunk = function (e) {\n          var t = this;\n          if (this.closed) this.props.debug && i.debug(\"grpc.onChunk received after request was closed - ignoring\");else {\n            var r = [];\n\n            try {\n              r = this.parser.parse(e);\n            } catch (e) {\n              return this.props.debug && i.debug(\"onChunk.parsing error\", e, e.message), void this.rawOnError(s.Code.Internal, \"parsing error: \" + e.message);\n            }\n\n            r.forEach(function (e) {\n              if (e.chunkType === o.ChunkType.MESSAGE) {\n                var r = t.methodDefinition.responseType.deserializeBinary(e.data);\n                t.rawOnMessage(r);\n              } else e.chunkType === o.ChunkType.TRAILERS && (t.responseHeaders ? (t.responseTrailers = new n.Metadata(e.trailers), t.props.debug && i.debug(\"onChunk.trailers\", t.responseTrailers)) : (t.responseHeaders = new n.Metadata(e.trailers), t.rawOnHeaders(t.responseHeaders)));\n            });\n          }\n        }, e.prototype.onTransportEnd = function () {\n          if (this.props.debug && i.debug(\"grpc.onEnd\"), this.closed) this.props.debug && i.debug(\"grpc.onEnd received after request was closed - ignoring\");else if (void 0 !== this.responseTrailers) {\n            var e = c(this.responseTrailers);\n\n            if (null !== e) {\n              var t = this.responseTrailers.get(\"grpc-message\"),\n                  r = this.decodeGRPCStatus(t[0]);\n              this.rawOnEnd(e, r, this.responseTrailers);\n            } else this.rawOnError(s.Code.Internal, \"Response closed without grpc-status (Trailers provided)\");\n          } else {\n            if (void 0 === this.responseHeaders) return void this.rawOnError(s.Code.Unknown, \"Response closed without headers\");\n            var n = c(this.responseHeaders),\n                o = this.responseHeaders.get(\"grpc-message\");\n            if (this.props.debug && i.debug(\"grpc.headers only response \", n, o), null === n) return void this.rawOnEnd(s.Code.Unknown, \"Response closed without grpc-status (Headers only)\", this.responseHeaders);\n            var a = this.decodeGRPCStatus(o[0]);\n            this.rawOnEnd(n, a, this.responseHeaders);\n          }\n        }, e.prototype.decodeGRPCStatus = function (e) {\n          if (!e) return \"\";\n\n          try {\n            return decodeURIComponent(e);\n          } catch (t) {\n            return e;\n          }\n        }, e.prototype.rawOnEnd = function (e, t, r) {\n          var n = this;\n          this.props.debug && i.debug(\"rawOnEnd\", e, t, r), this.completed || (this.completed = !0, this.onEndCallbacks.forEach(function (o) {\n            if (!n.closed) try {\n              o(e, t, r);\n            } catch (e) {\n              setTimeout(function () {\n                throw e;\n              });\n            }\n          }));\n        }, e.prototype.rawOnHeaders = function (e) {\n          this.props.debug && i.debug(\"rawOnHeaders\", e), this.completed || this.onHeadersCallbacks.forEach(function (t) {\n            try {\n              t(e);\n            } catch (e) {\n              setTimeout(function () {\n                throw e;\n              });\n            }\n          });\n        }, e.prototype.rawOnError = function (e, t, r) {\n          var o = this;\n          void 0 === r && (r = new n.Metadata()), this.props.debug && i.debug(\"rawOnError\", e, t), this.completed || (this.completed = !0, this.onEndCallbacks.forEach(function (n) {\n            if (!o.closed) try {\n              n(e, t, r);\n            } catch (e) {\n              setTimeout(function () {\n                throw e;\n              });\n            }\n          }));\n        }, e.prototype.rawOnMessage = function (e) {\n          var t = this;\n          this.props.debug && i.debug(\"rawOnMessage\", e.toObject()), this.completed || this.closed || this.onMessageCallbacks.forEach(function (r) {\n            if (!t.closed) try {\n              r(e);\n            } catch (e) {\n              setTimeout(function () {\n                throw e;\n              });\n            }\n          });\n        }, e.prototype.onHeaders = function (e) {\n          this.onHeadersCallbacks.push(e);\n        }, e.prototype.onMessage = function (e) {\n          this.onMessageCallbacks.push(e);\n        }, e.prototype.onEnd = function (e) {\n          this.onEndCallbacks.push(e);\n        }, e.prototype.start = function (e) {\n          if (this.started) throw new Error(\"Client already started - cannot .start()\");\n          this.started = !0;\n          var t = new n.Metadata(e || {});\n          t.set(\"content-type\", \"application/grpc-web+proto\"), t.set(\"x-grpc-web\", \"1\"), this.transport.start(t);\n        }, e.prototype.send = function (e) {\n          if (!this.started) throw new Error(\"Client not started - .start() must be called before .send()\");\n          if (this.closed) throw new Error(\"Client already closed - cannot .send()\");\n          if (this.finishedSending) throw new Error(\"Client already finished sending - cannot .send()\");\n          if (!this.methodDefinition.requestStream && this.sentFirstMessage) throw new Error(\"Message already sent for non-client-streaming method - cannot .send()\");\n          this.sentFirstMessage = !0;\n          var t = u.frameRequest(e);\n          this.transport.sendMessage(t);\n        }, e.prototype.finishSend = function () {\n          if (!this.started) throw new Error(\"Client not started - .finishSend() must be called before .close()\");\n          if (this.closed) throw new Error(\"Client already closed - cannot .send()\");\n          if (this.finishedSending) throw new Error(\"Client already finished sending - cannot .finishSend()\");\n          this.finishedSending = !0, this.transport.finishSend();\n        }, e.prototype.close = function () {\n          if (!this.started) throw new Error(\"Client not started - .start() must be called before .close()\");\n          if (this.closed) throw new Error(\"Client already closed - cannot .close()\");\n          this.closed = !0, this.props.debug && i.debug(\"request.abort aborting request\"), this.transport.cancel();\n        }, e;\n      }();\n\n      function c(e) {\n        var t = e.get(\"grpc-status\") || [];\n        if (t.length > 0) try {\n          var r = t[0];\n          return parseInt(r, 10);\n        } catch (e) {\n          return null;\n        }\n        return null;\n      }\n    }, function (e, t, r) {\n      var n;\n      n = function () {\n        return function (e) {\n          var t = {};\n\n          function r(n) {\n            if (t[n]) return t[n].exports;\n            var o = t[n] = {\n              i: n,\n              l: !1,\n              exports: {}\n            };\n            return e[n].call(o.exports, o, o.exports, r), o.l = !0, o.exports;\n          }\n\n          return r.m = e, r.c = t, r.i = function (e) {\n            return e;\n          }, r.d = function (e, t, n) {\n            r.o(e, t) || Object.defineProperty(e, t, {\n              configurable: !1,\n              enumerable: !0,\n              get: n\n            });\n          }, r.n = function (e) {\n            var t = e && e.__esModule ? function () {\n              return e.default;\n            } : function () {\n              return e;\n            };\n            return r.d(t, \"a\", t), t;\n          }, r.o = function (e, t) {\n            return Object.prototype.hasOwnProperty.call(e, t);\n          }, r.p = \"\", r(r.s = 1);\n        }([function (e, t, r) {\n          Object.defineProperty(t, \"__esModule\", {\n            value: !0\n          });\n          var n = r(3);\n\n          var o = function () {\n            function e(e, t) {\n              void 0 === e && (e = {}), void 0 === t && (t = {\n                splitValues: !1\n              });\n              var r,\n                  o = this;\n              if (this.headersMap = {}, e) if (\"undefined\" != typeof Headers && e instanceof Headers) n.getHeaderKeys(e).forEach(function (r) {\n                n.getHeaderValues(e, r).forEach(function (e) {\n                  t.splitValues ? o.append(r, n.splitHeaderValue(e)) : o.append(r, e);\n                });\n              });else if (\"object\" == typeof (r = e) && \"object\" == typeof r.headersMap && \"function\" == typeof r.forEach) e.forEach(function (e, t) {\n                o.append(e, t);\n              });else if (\"undefined\" != typeof Map && e instanceof Map) {\n                e.forEach(function (e, t) {\n                  o.append(t, e);\n                });\n              } else \"string\" == typeof e ? this.appendFromString(e) : \"object\" == typeof e && Object.getOwnPropertyNames(e).forEach(function (t) {\n                var r = e[t];\n                Array.isArray(r) ? r.forEach(function (e) {\n                  o.append(t, e);\n                }) : o.append(t, r);\n              });\n            }\n\n            return e.prototype.appendFromString = function (e) {\n              for (var t = e.split(\"\\r\\n\"), r = 0; r < t.length; r++) {\n                var n = t[r],\n                    o = n.indexOf(\":\");\n\n                if (o > 0) {\n                  var s = n.substring(0, o).trim(),\n                      i = n.substring(o + 1).trim();\n                  this.append(s, i);\n                }\n              }\n            }, e.prototype.delete = function (e, t) {\n              var r = n.normalizeName(e);\n              if (void 0 === t) delete this.headersMap[r];else {\n                var o = this.headersMap[r];\n\n                if (o) {\n                  var s = o.indexOf(t);\n                  s >= 0 && o.splice(s, 1), 0 === o.length && delete this.headersMap[r];\n                }\n              }\n            }, e.prototype.append = function (e, t) {\n              var r = this,\n                  o = n.normalizeName(e);\n              Array.isArray(this.headersMap[o]) || (this.headersMap[o] = []), Array.isArray(t) ? t.forEach(function (e) {\n                r.headersMap[o].push(n.normalizeValue(e));\n              }) : this.headersMap[o].push(n.normalizeValue(t));\n            }, e.prototype.set = function (e, t) {\n              var r = n.normalizeName(e);\n\n              if (Array.isArray(t)) {\n                var o = [];\n                t.forEach(function (e) {\n                  o.push(n.normalizeValue(e));\n                }), this.headersMap[r] = o;\n              } else this.headersMap[r] = [n.normalizeValue(t)];\n            }, e.prototype.has = function (e, t) {\n              var r = this.headersMap[n.normalizeName(e)];\n              if (!Array.isArray(r)) return !1;\n\n              if (void 0 !== t) {\n                var o = n.normalizeValue(t);\n                return r.indexOf(o) >= 0;\n              }\n\n              return !0;\n            }, e.prototype.get = function (e) {\n              var t = this.headersMap[n.normalizeName(e)];\n              return void 0 !== t ? t.concat() : [];\n            }, e.prototype.forEach = function (e) {\n              var t = this;\n              Object.getOwnPropertyNames(this.headersMap).forEach(function (r) {\n                e(r, t.headersMap[r]);\n              }, this);\n            }, e.prototype.toHeaders = function () {\n              if (\"undefined\" != typeof Headers) {\n                var e = new Headers();\n                return this.forEach(function (t, r) {\n                  r.forEach(function (r) {\n                    e.append(t, r);\n                  });\n                }), e;\n              }\n\n              throw new Error(\"Headers class is not defined\");\n            }, e;\n          }();\n\n          t.BrowserHeaders = o;\n        }, function (e, t, r) {\n          Object.defineProperty(t, \"__esModule\", {\n            value: !0\n          });\n          var n = r(0);\n          t.BrowserHeaders = n.BrowserHeaders;\n        }, function (e, t, r) {\n          Object.defineProperty(t, \"__esModule\", {\n            value: !0\n          }), t.iterateHeaders = function (e, t) {\n            for (var r = e[Symbol.iterator](), n = r.next(); !n.done;) t(n.value[0]), n = r.next();\n          }, t.iterateHeadersKeys = function (e, t) {\n            for (var r = e.keys(), n = r.next(); !n.done;) t(n.value), n = r.next();\n          };\n        }, function (e, t, r) {\n          Object.defineProperty(t, \"__esModule\", {\n            value: !0\n          });\n          var n = r(2);\n\n          function o(e) {\n            return e;\n          }\n\n          t.normalizeName = function (e) {\n            if (\"string\" != typeof e && (e = String(e)), /[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(e)) throw new TypeError(\"Invalid character in header field name\");\n            return e.toLowerCase();\n          }, t.normalizeValue = function (e) {\n            return \"string\" != typeof e && (e = String(e)), e;\n          }, t.getHeaderValues = function (e, t) {\n            var r = o(e);\n            if (r instanceof Headers && r.getAll) return r.getAll(t);\n            var n = r.get(t);\n            return n && \"string\" == typeof n ? [n] : n;\n          }, t.getHeaderKeys = function (e) {\n            var t = o(e),\n                r = {},\n                s = [];\n            return t.keys ? n.iterateHeadersKeys(t, function (e) {\n              r[e] || (r[e] = !0, s.push(e));\n            }) : t.forEach ? t.forEach(function (e, t) {\n              r[t] || (r[t] = !0, s.push(t));\n            }) : n.iterateHeaders(t, function (e) {\n              var t = e[0];\n              r[t] || (r[t] = !0, s.push(t));\n            }), s;\n          }, t.splitHeaderValue = function (e) {\n            var t = [];\n            return e.split(\", \").forEach(function (e) {\n              e.split(\",\").forEach(function (e) {\n                t.push(e);\n              });\n            }), t;\n          };\n        }]);\n      }, e.exports = n();\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n\n      var n = r(5),\n          o = function (e) {\n        return n.CrossBrowserHttpTransport({\n          withCredentials: !1\n        })(e);\n      };\n\n      t.setDefaultTransportFactory = function (e) {\n        o = e;\n      }, t.makeDefaultTransport = function (e) {\n        return o(e);\n      };\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n      var n = r(6),\n          o = r(7);\n\n      t.CrossBrowserHttpTransport = function (e) {\n        if (n.detectFetchSupport()) {\n          var t = {\n            credentials: e.withCredentials ? \"include\" : \"same-origin\"\n          };\n          return n.FetchReadableStreamTransport(t);\n        }\n\n        return o.XhrTransport({\n          withCredentials: e.withCredentials\n        });\n      };\n    }, function (e, t, r) {\n      var n = this && this.__assign || function () {\n        return (n = Object.assign || function (e) {\n          for (var t, r = 1, n = arguments.length; r < n; r++) for (var o in t = arguments[r]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);\n\n          return e;\n        }).apply(this, arguments);\n      };\n\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n      var o = r(0),\n          s = r(1);\n\n      t.FetchReadableStreamTransport = function (e) {\n        return function (t) {\n          return function (e, t) {\n            return e.debug && s.debug(\"fetchRequest\", e), new i(e, t);\n          }(t, e);\n        };\n      };\n\n      var i = function () {\n        function e(e, t) {\n          this.cancelled = !1, this.controller = self.AbortController && new AbortController(), this.options = e, this.init = t;\n        }\n\n        return e.prototype.pump = function (e, t) {\n          var r = this;\n          if (this.reader = e, this.cancelled) return this.options.debug && s.debug(\"Fetch.pump.cancel at first pump\"), void this.reader.cancel();\n          this.reader.read().then(function (e) {\n            if (e.done) return r.options.onEnd(), t;\n            r.options.onChunk(e.value), r.pump(r.reader, t);\n          }).catch(function (e) {\n            r.cancelled ? r.options.debug && s.debug(\"Fetch.catch - request cancelled\") : (r.cancelled = !0, r.options.debug && s.debug(\"Fetch.catch\", e.message), r.options.onEnd(e));\n          });\n        }, e.prototype.send = function (e) {\n          var t = this;\n          fetch(this.options.url, n({}, this.init, {\n            headers: this.metadata.toHeaders(),\n            method: \"POST\",\n            body: e,\n            signal: this.controller && this.controller.signal\n          })).then(function (e) {\n            if (t.options.debug && s.debug(\"Fetch.response\", e), t.options.onHeaders(new o.Metadata(e.headers), e.status), !e.body) return e;\n            t.pump(e.body.getReader(), e);\n          }).catch(function (e) {\n            t.cancelled ? t.options.debug && s.debug(\"Fetch.catch - request cancelled\") : (t.cancelled = !0, t.options.debug && s.debug(\"Fetch.catch\", e.message), t.options.onEnd(e));\n          });\n        }, e.prototype.sendMessage = function (e) {\n          this.send(e);\n        }, e.prototype.finishSend = function () {}, e.prototype.start = function (e) {\n          this.metadata = e;\n        }, e.prototype.cancel = function () {\n          this.cancelled ? this.options.debug && s.debug(\"Fetch.abort.cancel already cancelled\") : (this.cancelled = !0, this.reader ? (this.options.debug && s.debug(\"Fetch.abort.cancel\"), this.reader.cancel()) : this.options.debug && s.debug(\"Fetch.abort.cancel before reader\"), this.controller && this.controller.abort());\n        }, e;\n      }();\n\n      t.detectFetchSupport = function () {\n        return \"undefined\" != typeof Response && Response.prototype.hasOwnProperty(\"body\") && \"function\" == typeof Headers;\n      };\n    }, function (e, t, r) {\n      var n,\n          o = this && this.__extends || (n = function (e, t) {\n        return (n = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (e, t) {\n          e.__proto__ = t;\n        } || function (e, t) {\n          for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]);\n        })(e, t);\n      }, function (e, t) {\n        function r() {\n          this.constructor = e;\n        }\n\n        n(e, t), e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype, new r());\n      });\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n      var s = r(0),\n          i = r(1),\n          a = r(11);\n\n      t.XhrTransport = function (e) {\n        return function (t) {\n          if (a.detectMozXHRSupport()) return new d(t, e);\n          if (a.detectXHROverrideMimeTypeSupport()) return new u(t, e);\n          throw new Error(\"This environment's XHR implementation cannot support binary transfer.\");\n        };\n      };\n\n      var u = function () {\n        function e(e, t) {\n          this.options = e, this.init = t;\n        }\n\n        return e.prototype.onProgressEvent = function () {\n          this.options.debug && i.debug(\"XHR.onProgressEvent.length: \", this.xhr.response.length);\n          var e = this.xhr.response.substr(this.index);\n          this.index = this.xhr.response.length;\n          var t = p(e);\n          this.options.onChunk(t);\n        }, e.prototype.onLoadEvent = function () {\n          this.options.debug && i.debug(\"XHR.onLoadEvent\"), this.options.onEnd();\n        }, e.prototype.onStateChange = function () {\n          this.options.debug && i.debug(\"XHR.onStateChange\", this.xhr.readyState), this.xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED && this.options.onHeaders(new s.Metadata(this.xhr.getAllResponseHeaders()), this.xhr.status);\n        }, e.prototype.sendMessage = function (e) {\n          this.xhr.send(e);\n        }, e.prototype.finishSend = function () {}, e.prototype.start = function (e) {\n          var t = this;\n          this.metadata = e;\n          var r = new XMLHttpRequest();\n          this.xhr = r, r.open(\"POST\", this.options.url), this.configureXhr(), this.metadata.forEach(function (e, t) {\n            r.setRequestHeader(e, t.join(\", \"));\n          }), r.withCredentials = Boolean(this.init.withCredentials), r.addEventListener(\"readystatechange\", this.onStateChange.bind(this)), r.addEventListener(\"progress\", this.onProgressEvent.bind(this)), r.addEventListener(\"loadend\", this.onLoadEvent.bind(this)), r.addEventListener(\"error\", function (e) {\n            t.options.debug && i.debug(\"XHR.error\", e), t.options.onEnd(e.error);\n          });\n        }, e.prototype.configureXhr = function () {\n          this.xhr.responseType = \"text\", this.xhr.overrideMimeType(\"text/plain; charset=x-user-defined\");\n        }, e.prototype.cancel = function () {\n          this.options.debug && i.debug(\"XHR.abort\"), this.xhr.abort();\n        }, e;\n      }();\n\n      t.XHR = u;\n\n      var d = function (e) {\n        function t() {\n          return null !== e && e.apply(this, arguments) || this;\n        }\n\n        return o(t, e), t.prototype.configureXhr = function () {\n          this.options.debug && i.debug(\"MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'\"), this.xhr.responseType = \"moz-chunked-arraybuffer\";\n        }, t.prototype.onProgressEvent = function () {\n          var e = this.xhr.response;\n          this.options.debug && i.debug(\"MozXHR.onProgressEvent: \", new Uint8Array(e)), this.options.onChunk(new Uint8Array(e));\n        }, t;\n      }(u);\n\n      function c(e, t) {\n        var r = e.charCodeAt(t);\n\n        if (r >= 55296 && r <= 56319) {\n          var n = e.charCodeAt(t + 1);\n          n >= 56320 && n <= 57343 && (r = 65536 + (r - 55296 << 10) + (n - 56320));\n        }\n\n        return r;\n      }\n\n      function p(e) {\n        for (var t = new Uint8Array(e.length), r = 0, n = 0; n < e.length; n++) {\n          var o = String.prototype.codePointAt ? e.codePointAt(n) : c(e, n);\n          t[r++] = 255 & o;\n        }\n\n        return t;\n      }\n\n      t.MozChunkedArrayBufferXHR = d, t.stringToArrayBuffer = p;\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n\n      var n,\n          o = r(0),\n          s = function (e) {\n        return 9 === e || 10 === e || 13 === e;\n      };\n\n      function i(e) {\n        return s(e) || e >= 32 && e <= 126;\n      }\n\n      function a(e) {\n        for (var t = 0; t !== e.length; ++t) if (!i(e[t])) throw new Error(\"Metadata is not valid (printable) ASCII\");\n\n        return String.fromCharCode.apply(String, Array.prototype.slice.call(e));\n      }\n\n      function u(e) {\n        return 128 == (128 & e.getUint8(0));\n      }\n\n      function d(e) {\n        return e.getUint32(1, !1);\n      }\n\n      function c(e, t, r) {\n        return e.byteLength - t >= r;\n      }\n\n      function p(e, t, r) {\n        if (e.slice) return e.slice(t, r);\n        var n = e.length;\n        void 0 !== r && (n = r);\n\n        for (var o = new Uint8Array(n - t), s = 0, i = t; i < n; i++) o[s++] = e[i];\n\n        return o;\n      }\n\n      t.decodeASCII = a, t.encodeASCII = function (e) {\n        for (var t = new Uint8Array(e.length), r = 0; r !== e.length; ++r) {\n          var n = e.charCodeAt(r);\n          if (!i(n)) throw new Error(\"Metadata contains invalid ASCII\");\n          t[r] = n;\n        }\n\n        return t;\n      }, function (e) {\n        e[e.MESSAGE = 1] = \"MESSAGE\", e[e.TRAILERS = 2] = \"TRAILERS\";\n      }(n = t.ChunkType || (t.ChunkType = {}));\n\n      var h = function () {\n        function e() {\n          this.buffer = null, this.position = 0;\n        }\n\n        return e.prototype.parse = function (e, t) {\n          if (0 === e.length && t) return [];\n          var r,\n              s = [];\n          if (null == this.buffer) this.buffer = e, this.position = 0;else if (this.position === this.buffer.byteLength) this.buffer = e, this.position = 0;else {\n            var i = this.buffer.byteLength - this.position,\n                h = new Uint8Array(i + e.byteLength),\n                f = p(this.buffer, this.position);\n            h.set(f, 0);\n            var l = new Uint8Array(e);\n            h.set(l, i), this.buffer = h, this.position = 0;\n          }\n\n          for (;;) {\n            if (!c(this.buffer, this.position, 5)) return s;\n            var g = p(this.buffer, this.position, this.position + 5),\n                b = new DataView(g.buffer, g.byteOffset, g.byteLength),\n                y = d(b);\n            if (!c(this.buffer, this.position, 5 + y)) return s;\n            var v = p(this.buffer, this.position + 5, this.position + 5 + y);\n            if (this.position += 5 + y, u(b)) return s.push({\n              chunkType: n.TRAILERS,\n              trailers: (r = v, new o.Metadata(a(r)))\n            }), s;\n            s.push({\n              chunkType: n.MESSAGE,\n              data: v\n            });\n          }\n        }, e;\n      }();\n\n      t.ChunkParser = h;\n    }, function (e, t, r) {\n      var n;\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      }), function (e) {\n        e[e.OK = 0] = \"OK\", e[e.Canceled = 1] = \"Canceled\", e[e.Unknown = 2] = \"Unknown\", e[e.InvalidArgument = 3] = \"InvalidArgument\", e[e.DeadlineExceeded = 4] = \"DeadlineExceeded\", e[e.NotFound = 5] = \"NotFound\", e[e.AlreadyExists = 6] = \"AlreadyExists\", e[e.PermissionDenied = 7] = \"PermissionDenied\", e[e.ResourceExhausted = 8] = \"ResourceExhausted\", e[e.FailedPrecondition = 9] = \"FailedPrecondition\", e[e.Aborted = 10] = \"Aborted\", e[e.OutOfRange = 11] = \"OutOfRange\", e[e.Unimplemented = 12] = \"Unimplemented\", e[e.Internal = 13] = \"Internal\", e[e.Unavailable = 14] = \"Unavailable\", e[e.DataLoss = 15] = \"DataLoss\", e[e.Unauthenticated = 16] = \"Unauthenticated\";\n      }(n = t.Code || (t.Code = {})), t.httpStatusToCode = function (e) {\n        switch (e) {\n          case 0:\n            return n.Internal;\n\n          case 200:\n            return n.OK;\n\n          case 400:\n            return n.InvalidArgument;\n\n          case 401:\n            return n.Unauthenticated;\n\n          case 403:\n            return n.PermissionDenied;\n\n          case 404:\n            return n.NotFound;\n\n          case 409:\n            return n.Aborted;\n\n          case 412:\n            return n.FailedPrecondition;\n\n          case 429:\n            return n.ResourceExhausted;\n\n          case 499:\n            return n.Canceled;\n\n          case 500:\n            return n.Unknown;\n\n          case 501:\n            return n.Unimplemented;\n\n          case 503:\n            return n.Unavailable;\n\n          case 504:\n            return n.DeadlineExceeded;\n\n          default:\n            return n.Unknown;\n        }\n      };\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n      var n = r(3),\n          o = r(4),\n          s = r(6),\n          i = r(12),\n          a = r(7),\n          u = r(5),\n          d = r(9),\n          c = r(13),\n          p = r(15),\n          h = r(2);\n      !function (e) {\n        e.setDefaultTransport = o.setDefaultTransportFactory, e.CrossBrowserHttpTransport = u.CrossBrowserHttpTransport, e.FetchReadableStreamTransport = s.FetchReadableStreamTransport, e.XhrTransport = a.XhrTransport, e.WebsocketTransport = i.WebsocketTransport, e.Code = d.Code, e.Metadata = n.BrowserHeaders, e.client = function (e, t) {\n          return h.client(e, t);\n        }, e.invoke = c.invoke, e.unary = p.unary;\n      }(t.grpc || (t.grpc = {}));\n    }, function (e, t, r) {\n      var n;\n\n      function o() {\n        if (void 0 !== n) return n;\n\n        if (XMLHttpRequest) {\n          n = new XMLHttpRequest();\n\n          try {\n            n.open(\"GET\", \"https://localhost\");\n          } catch (e) {}\n        }\n\n        return n;\n      }\n\n      function s(e) {\n        var t = o();\n        if (!t) return !1;\n\n        try {\n          return t.responseType = e, t.responseType === e;\n        } catch (e) {}\n\n        return !1;\n      }\n\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      }), t.xhrSupportsResponseType = s, t.detectMozXHRSupport = function () {\n        return \"undefined\" != typeof XMLHttpRequest && s(\"moz-chunked-arraybuffer\");\n      }, t.detectXHROverrideMimeTypeSupport = function () {\n        return \"undefined\" != typeof XMLHttpRequest && XMLHttpRequest.prototype.hasOwnProperty(\"overrideMimeType\");\n      };\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n      var n,\n          o = r(1),\n          s = r(8);\n      !function (e) {\n        e[e.FINISH_SEND = 1] = \"FINISH_SEND\";\n      }(n || (n = {}));\n      var i = new Uint8Array([1]);\n\n      t.WebsocketTransport = function () {\n        return function (e) {\n          return function (e) {\n            e.debug && o.debug(\"websocketRequest\", e);\n\n            var t,\n                r = function (e) {\n              if (\"https://\" === e.substr(0, 8)) return \"wss://\" + e.substr(8);\n              if (\"http://\" === e.substr(0, 7)) return \"ws://\" + e.substr(7);\n              throw new Error(\"Websocket transport constructed with non-https:// or http:// host.\");\n            }(e.url),\n                a = [];\n\n            function u(e) {\n              if (e === n.FINISH_SEND) t.send(i);else {\n                var r = e,\n                    o = new Int8Array(r.byteLength + 1);\n                o.set(new Uint8Array([0])), o.set(r, 1), t.send(o);\n              }\n            }\n\n            return {\n              sendMessage: function (e) {\n                t && t.readyState !== t.CONNECTING ? u(e) : a.push(e);\n              },\n              finishSend: function () {\n                t && t.readyState !== t.CONNECTING ? u(n.FINISH_SEND) : a.push(n.FINISH_SEND);\n              },\n              start: function (n) {\n                (t = new WebSocket(r, [\"grpc-websockets\"])).binaryType = \"arraybuffer\", t.onopen = function () {\n                  var r;\n                  e.debug && o.debug(\"websocketRequest.onopen\"), t.send((r = \"\", n.forEach(function (e, t) {\n                    r += e + \": \" + t.join(\", \") + \"\\r\\n\";\n                  }), s.encodeASCII(r))), a.forEach(function (e) {\n                    u(e);\n                  });\n                }, t.onclose = function (t) {\n                  e.debug && o.debug(\"websocketRequest.onclose\", t), e.onEnd();\n                }, t.onerror = function (t) {\n                  e.debug && o.debug(\"websocketRequest.onerror\", t);\n                }, t.onmessage = function (t) {\n                  e.onChunk(new Uint8Array(t.data));\n                };\n              },\n              cancel: function () {\n                e.debug && o.debug(\"websocket.abort\"), t.close();\n              }\n            };\n          }(e);\n        };\n      };\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n      var n = r(2);\n\n      t.invoke = function (e, t) {\n        if (e.requestStream) throw new Error(\".invoke cannot be used with client-streaming methods. Use .client instead.\");\n        var r = n.client(e, {\n          host: t.host,\n          transport: t.transport,\n          debug: t.debug\n        });\n        return t.onHeaders && r.onHeaders(t.onHeaders), t.onMessage && r.onMessage(t.onMessage), t.onEnd && r.onEnd(t.onEnd), r.start(t.metadata), r.send(t.request), r.finishSend(), {\n          close: function () {\n            r.close();\n          }\n        };\n      };\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      }), t.frameRequest = function (e) {\n        var t = e.serializeBinary(),\n            r = new ArrayBuffer(t.byteLength + 5);\n        return new DataView(r, 1, 4).setUint32(0, t.length, !1), new Uint8Array(r, 5).set(t), new Uint8Array(r);\n      };\n    }, function (e, t, r) {\n      Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n      var n = r(0),\n          o = r(2);\n\n      t.unary = function (e, t) {\n        if (e.responseStream) throw new Error(\".unary cannot be used with server-streaming methods. Use .invoke or .client instead.\");\n        if (e.requestStream) throw new Error(\".unary cannot be used with client-streaming methods. Use .client instead.\");\n        var r = null,\n            s = null,\n            i = o.client(e, {\n          host: t.host,\n          transport: t.transport,\n          debug: t.debug\n        });\n        return i.onHeaders(function (e) {\n          r = e;\n        }), i.onMessage(function (e) {\n          s = e;\n        }), i.onEnd(function (e, o, i) {\n          t.onEnd({\n            status: e,\n            statusMessage: o,\n            headers: r || new n.Metadata(),\n            message: s,\n            trailers: i\n          });\n        }), i.start(t.metadata), i.send(t.request), i.finishSend(), {\n          close: function () {\n            i.close();\n          }\n        };\n      };\n    }]);\n  });\n});\nconst errors = {\n  /**\n   * expirationError is an error your app will receive anytime your credentials have expired.\n   * @public\n   */\n  expirationError: new Error('Auth expired. Consider calling withKeyInfo or withAPISig to refresh.')\n};\nconst defaultHost = 'https://webapi.hub.textile.io';\n/**\n * Context provides context management for gRPC credentials and config settings.\n * It is the default implementation for the ContextInterface interface.\n */\n\nclass Context {\n  /**\n   * Construct a new Context object.\n   * @param host The remote gRPC host. This input exists to comply with the Config interface.\n   */\n  constructor(host = defaultHost) {\n    // Internal context variables\n    this._context = {};\n    this._context['host'] = host;\n  }\n\n  static fromUserAuth(auth, host = defaultHost) {\n    const ctx = new Context(host);\n\n    const {\n      key,\n      token\n    } = auth,\n          sig = __rest(auth, [\"key\", \"token\"]);\n\n    return ctx.withAPIKey(key).withAPISig(sig).withToken(token);\n  }\n\n  static fromUserAuthCallback(authCallback, host = defaultHost) {\n    const ctx = new Context(host); // @todo: Should we now callback right away?\n\n    ctx.authCallback = authCallback;\n    return ctx;\n  }\n\n  get host() {\n    return this._context['host'];\n  } // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n\n  set(key, value) {\n    this._context[key] = value;\n    return this;\n  }\n\n  get(key) {\n    return this._context[key];\n  }\n\n  withSession(value) {\n    if (value === undefined) return this;\n    this._context['x-textile-session'] = value;\n    return this;\n  }\n\n  withThread(value) {\n    if (value === undefined) return this;\n    this._context['x-textile-thread'] = value.toString();\n    return this;\n  }\n\n  withThreadName(value) {\n    if (value === undefined) return this;\n    this._context['x-textile-thread-name'] = value;\n    return this;\n  }\n\n  withOrg(value) {\n    if (value === undefined) return this;\n    this._context['x-textile-org'] = value;\n    return this;\n  }\n\n  withToken(value) {\n    if (value === undefined) return this;\n    this._context['authorization'] = `bearer ${value}`;\n    return this;\n  }\n\n  withAPIKey(value) {\n    if (value === undefined) return this;\n    this._context['x-textile-api-key'] = value;\n    return this;\n  }\n\n  withAPISig(value) {\n    if (value === undefined) return this;\n    const {\n      sig,\n      msg\n    } = value;\n    this._context['x-textile-api-sig-msg'] = msg;\n    this._context['x-textile-api-sig'] = sig;\n    return this;\n  }\n\n  withKeyInfo(key, date) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (key === undefined) return this; // Enables the use of insecure / non-signing keys\n\n      if (!key.secret) return this.withAPIKey(key.key);\n      const sig = yield createAPISig(key.secret, date);\n      return this.withAPIKey(key.key).withAPISig(sig);\n    });\n  }\n\n  withContext(value) {\n    if (value === undefined) return this;\n    this._context = Object.assign(Object.assign({}, this._context), value.toJSON());\n    return this;\n  }\n  /**\n   * Returns true if this Context contains an api sig msg, and that msg has expired, or if\n   * it does _not_ have an api sig msg, but it _does_ have an auth callback.\n   */\n\n\n  get isExpired() {\n    const msg = this.get('x-textile-api-sig-msg');\n    const notAuthed = msg === undefined && this.authCallback !== undefined;\n    const isExpired = msg !== undefined && new Date(msg) <= new Date();\n    return isExpired || notAuthed;\n  }\n  /**\n   * Refresh user auth with provided callback.\n   * If callback is not specified, attempts to use existing callback specified at initialization.\n   */\n\n\n  refreshUserAuth(authCallback) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // If we have a new one, use it...\n      if (authCallback !== undefined) {\n        this.authCallback = authCallback;\n      } // If we still don't have a callback, throw...\n\n\n      if (this.authCallback === undefined) {\n        throw new Error('Missing authCallback. See Context.fromUserAuthCallback for details.');\n      } // Now do the renewal and return self...\n\n\n      const _a = yield this.authCallback(),\n            {\n        key,\n        token\n      } = _a,\n            sig = __rest(_a, [\"key\", \"token\"]);\n\n      return this.withAPIKey(key).withAPISig(sig).withToken(token);\n    });\n  }\n  /**\n   * Convert Context to plain JSON object.\n   * @throws If this Context has expired.\n   * @see toMetadata for an alternative for gRPC clients that supports auto-renewal.\n   */\n\n\n  toJSON() {\n    const json = Object.assign({}, this._context); // If we're expired, throw...\n\n    if (this.isExpired) {\n      throw errors.expirationError;\n    }\n\n    return json;\n  }\n  /**\n   * Convert Context to grpc Metadata object.\n   * Will automatically call the auth callback if available.\n   * @param ctx Additional context object that will be merged with this prior to conversion.\n   * @see toJSON for an alternative that returns a plain object, and throws when expired.\n   */\n\n\n  toMetadata(ctx) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const context = new Context();\n\n      if (this.isExpired && this.authCallback !== undefined) {\n        const _a = yield this.authCallback(),\n              {\n          key,\n          token\n        } = _a,\n              sig = __rest(_a, [\"key\", \"token\"]); // We do want to mutate this here because we want to update our auth sig\n\n\n        this.withAPIKey(key).withAPISig(sig).withToken(token);\n      } // We merge this context and ctx with the empty context so as to avoid mutating this with ctx\n\n\n      return new grpcWebClient_umd.grpc.Metadata(context.withContext(this).withContext(ctx).toJSON());\n    });\n  }\n  /**\n   * Import various ContextInterface API properties from JSON.\n   * @param json The JSON object.\n   * @param host Optional host string.\n   */\n\n\n  static fromJSON(json, host = defaultHost) {\n    const newContext = Object.assign({}, json);\n    newContext['host'] = host;\n    const ctx = new Context();\n    ctx._context = newContext;\n    return ctx;\n  }\n\n}\n\nexport { Context, defaultHost, errors };","map":{"version":3,"sources":["/Users/wiki/code/filecoin/private.storage/node_modules/@textile/context/dist/esm/index.js"],"names":["createAPISig","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","apply","commonjsGlobal","globalThis","window","global","self","createCommonjsModule","fn","module","exports","grpcWebClient_umd","r","n","o","l","m","c","d","defineProperty","enumerable","get","Symbol","toStringTag","__esModule","create","bind","default","Metadata","BrowserHeaders","debug","arguments","console","log","a","u","client","started","sentFirstMessage","completed","closed","finishedSending","onHeadersCallbacks","onMessageCallbacks","onEndCallbacks","parser","ChunkParser","methodDefinition","props","createTransport","host","service","serviceName","methodName","url","onHeaders","onTransportHeaders","onChunk","onTransportChunk","onEnd","onTransportEnd","transport","makeDefaultTransport","responseHeaders","JSON","stringify","httpStatusToCode","rawOnHeaders","Code","OK","decodeGRPCStatus","rawOnError","parse","message","Internal","forEach","chunkType","ChunkType","MESSAGE","responseType","deserializeBinary","data","rawOnMessage","TRAILERS","responseTrailers","trailers","rawOnEnd","Unknown","decodeURIComponent","setTimeout","toObject","push","onMessage","start","Error","set","send","requestStream","frameRequest","sendMessage","finishSend","close","cancel","parseInt","configurable","splitValues","headersMap","Headers","getHeaderKeys","getHeaderValues","append","splitHeaderValue","Map","appendFromString","getOwnPropertyNames","Array","isArray","split","substring","trim","delete","normalizeName","splice","normalizeValue","has","concat","toHeaders","iterateHeaders","iterator","iterateHeadersKeys","keys","String","test","TypeError","toLowerCase","getAll","CrossBrowserHttpTransport","withCredentials","setDefaultTransportFactory","detectFetchSupport","credentials","FetchReadableStreamTransport","XhrTransport","__assign","assign","cancelled","controller","AbortController","options","init","pump","reader","read","catch","fetch","headers","metadata","method","body","signal","status","getReader","abort","Response","__extends","setPrototypeOf","__proto__","constructor","detectMozXHRSupport","detectXHROverrideMimeTypeSupport","onProgressEvent","xhr","response","substr","index","onLoadEvent","onStateChange","readyState","XMLHttpRequest","HEADERS_RECEIVED","getAllResponseHeaders","open","configureXhr","setRequestHeader","join","Boolean","addEventListener","error","overrideMimeType","XHR","Uint8Array","charCodeAt","codePointAt","MozChunkedArrayBufferXHR","stringToArrayBuffer","fromCharCode","slice","getUint8","getUint32","byteLength","decodeASCII","encodeASCII","h","buffer","position","f","g","b","DataView","byteOffset","y","v","Canceled","InvalidArgument","DeadlineExceeded","NotFound","AlreadyExists","PermissionDenied","ResourceExhausted","FailedPrecondition","Aborted","OutOfRange","Unimplemented","Unavailable","DataLoss","Unauthenticated","setDefaultTransport","WebsocketTransport","invoke","unary","grpc","xhrSupportsResponseType","FINISH_SEND","Int8Array","CONNECTING","WebSocket","binaryType","onopen","onclose","onerror","onmessage","request","serializeBinary","ArrayBuffer","setUint32","responseStream","statusMessage","errors","expirationError","defaultHost","Context","_context","fromUserAuth","auth","ctx","key","token","sig","withAPIKey","withAPISig","withToken","fromUserAuthCallback","authCallback","withSession","undefined","withThread","toString","withThreadName","withOrg","msg","withKeyInfo","date","secret","withContext","toJSON","isExpired","notAuthed","Date","refreshUserAuth","_a","json","toMetadata","context","fromJSON","newContext"],"mappings":"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","sourcesContent":["import { createAPISig } from '@textile/security';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn) {\n  var module = { exports: {} };\n\treturn fn(module, module.exports), module.exports;\n}\n\nvar grpcWebClient_umd = createCommonjsModule(function (module, exports) {\n!function(e,t){module.exports=t();}(commonjsGlobal,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n});},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0});},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=10)}([function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3);t.Metadata=n.BrowserHeaders;},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0}),t.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug?console.debug.apply(null,e):console.log.apply(null,e);};},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(8),s=r(9),i=r(1),a=r(4),u=r(14);t.client=function(e,t){return new d(e,t)};var d=function(){function e(e,t){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new o.ChunkParser,this.methodDefinition=e,this.props=t,this.createTransport();}return e.prototype.createTransport=function(){var e=this.props.host+\"/\"+this.methodDefinition.service.serviceName+\"/\"+this.methodDefinition.methodName,t={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:e,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(t):this.transport=a.makeDefaultTransport(t);},e.prototype.onTransportHeaders=function(e,t){if(this.props.debug&&i.debug(\"onHeaders\",e,t),this.closed)this.props.debug&&i.debug(\"grpc.onHeaders received after request was closed - ignoring\");else if(0===t);else {this.responseHeaders=e,this.props.debug&&i.debug(\"onHeaders.responseHeaders\",JSON.stringify(this.responseHeaders,null,2));var r=c(e);this.props.debug&&i.debug(\"onHeaders.gRPCStatus\",r);var n=r&&r>=0?r:s.httpStatusToCode(t);this.props.debug&&i.debug(\"onHeaders.code\",n);var o=e.get(\"grpc-message\")||[];if(this.props.debug&&i.debug(\"onHeaders.gRPCMessage\",o),this.rawOnHeaders(e),n!==s.Code.OK){var a=this.decodeGRPCStatus(o[0]);this.rawOnError(n,a,e);}}},e.prototype.onTransportChunk=function(e){var t=this;if(this.closed)this.props.debug&&i.debug(\"grpc.onChunk received after request was closed - ignoring\");else {var r=[];try{r=this.parser.parse(e);}catch(e){return this.props.debug&&i.debug(\"onChunk.parsing error\",e,e.message),void this.rawOnError(s.Code.Internal,\"parsing error: \"+e.message)}r.forEach(function(e){if(e.chunkType===o.ChunkType.MESSAGE){var r=t.methodDefinition.responseType.deserializeBinary(e.data);t.rawOnMessage(r);}else e.chunkType===o.ChunkType.TRAILERS&&(t.responseHeaders?(t.responseTrailers=new n.Metadata(e.trailers),t.props.debug&&i.debug(\"onChunk.trailers\",t.responseTrailers)):(t.responseHeaders=new n.Metadata(e.trailers),t.rawOnHeaders(t.responseHeaders)));});}},e.prototype.onTransportEnd=function(){if(this.props.debug&&i.debug(\"grpc.onEnd\"),this.closed)this.props.debug&&i.debug(\"grpc.onEnd received after request was closed - ignoring\");else if(void 0!==this.responseTrailers){var e=c(this.responseTrailers);if(null!==e){var t=this.responseTrailers.get(\"grpc-message\"),r=this.decodeGRPCStatus(t[0]);this.rawOnEnd(e,r,this.responseTrailers);}else this.rawOnError(s.Code.Internal,\"Response closed without grpc-status (Trailers provided)\");}else {if(void 0===this.responseHeaders)return void this.rawOnError(s.Code.Unknown,\"Response closed without headers\");var n=c(this.responseHeaders),o=this.responseHeaders.get(\"grpc-message\");if(this.props.debug&&i.debug(\"grpc.headers only response \",n,o),null===n)return void this.rawOnEnd(s.Code.Unknown,\"Response closed without grpc-status (Headers only)\",this.responseHeaders);var a=this.decodeGRPCStatus(o[0]);this.rawOnEnd(n,a,this.responseHeaders);}},e.prototype.decodeGRPCStatus=function(e){if(!e)return \"\";try{return decodeURIComponent(e)}catch(t){return e}},e.prototype.rawOnEnd=function(e,t,r){var n=this;this.props.debug&&i.debug(\"rawOnEnd\",e,t,r),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(o){if(!n.closed)try{o(e,t,r);}catch(e){setTimeout(function(){throw e});}}));},e.prototype.rawOnHeaders=function(e){this.props.debug&&i.debug(\"rawOnHeaders\",e),this.completed||this.onHeadersCallbacks.forEach(function(t){try{t(e);}catch(e){setTimeout(function(){throw e});}});},e.prototype.rawOnError=function(e,t,r){var o=this;void 0===r&&(r=new n.Metadata),this.props.debug&&i.debug(\"rawOnError\",e,t),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(n){if(!o.closed)try{n(e,t,r);}catch(e){setTimeout(function(){throw e});}}));},e.prototype.rawOnMessage=function(e){var t=this;this.props.debug&&i.debug(\"rawOnMessage\",e.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(r){if(!t.closed)try{r(e);}catch(e){setTimeout(function(){throw e});}});},e.prototype.onHeaders=function(e){this.onHeadersCallbacks.push(e);},e.prototype.onMessage=function(e){this.onMessageCallbacks.push(e);},e.prototype.onEnd=function(e){this.onEndCallbacks.push(e);},e.prototype.start=function(e){if(this.started)throw new Error(\"Client already started - cannot .start()\");this.started=!0;var t=new n.Metadata(e||{});t.set(\"content-type\",\"application/grpc-web+proto\"),t.set(\"x-grpc-web\",\"1\"),this.transport.start(t);},e.prototype.send=function(e){if(!this.started)throw new Error(\"Client not started - .start() must be called before .send()\");if(this.closed)throw new Error(\"Client already closed - cannot .send()\");if(this.finishedSending)throw new Error(\"Client already finished sending - cannot .send()\");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error(\"Message already sent for non-client-streaming method - cannot .send()\");this.sentFirstMessage=!0;var t=u.frameRequest(e);this.transport.sendMessage(t);},e.prototype.finishSend=function(){if(!this.started)throw new Error(\"Client not started - .finishSend() must be called before .close()\");if(this.closed)throw new Error(\"Client already closed - cannot .send()\");if(this.finishedSending)throw new Error(\"Client already finished sending - cannot .finishSend()\");this.finishedSending=!0,this.transport.finishSend();},e.prototype.close=function(){if(!this.started)throw new Error(\"Client not started - .start() must be called before .close()\");if(this.closed)throw new Error(\"Client already closed - cannot .close()\");this.closed=!0,this.props.debug&&i.debug(\"request.abort aborting request\"),this.transport.cancel();},e}();function c(e){var t=e.get(\"grpc-status\")||[];if(t.length>0)try{var r=t[0];return parseInt(r,10)}catch(e){return null}return null}},function(e,t,r){var n;n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n});},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=1)}([function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3);var o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var r,o=this;if(this.headersMap={},e)if(\"undefined\"!=typeof Headers&&e instanceof Headers)n.getHeaderKeys(e).forEach(function(r){n.getHeaderValues(e,r).forEach(function(e){t.splitValues?o.append(r,n.splitHeaderValue(e)):o.append(r,e);});});else if(\"object\"==typeof(r=e)&&\"object\"==typeof r.headersMap&&\"function\"==typeof r.forEach)e.forEach(function(e,t){o.append(e,t);});else if(\"undefined\"!=typeof Map&&e instanceof Map){e.forEach(function(e,t){o.append(t,e);});}else \"string\"==typeof e?this.appendFromString(e):\"object\"==typeof e&&Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];Array.isArray(r)?r.forEach(function(e){o.append(t,e);}):o.append(t,r);});}return e.prototype.appendFromString=function(e){for(var t=e.split(\"\\r\\n\"),r=0;r<t.length;r++){var n=t[r],o=n.indexOf(\":\");if(o>0){var s=n.substring(0,o).trim(),i=n.substring(o+1).trim();this.append(s,i);}}},e.prototype.delete=function(e,t){var r=n.normalizeName(e);if(void 0===t)delete this.headersMap[r];else {var o=this.headersMap[r];if(o){var s=o.indexOf(t);s>=0&&o.splice(s,1),0===o.length&&delete this.headersMap[r];}}},e.prototype.append=function(e,t){var r=this,o=n.normalizeName(e);Array.isArray(this.headersMap[o])||(this.headersMap[o]=[]),Array.isArray(t)?t.forEach(function(e){r.headersMap[o].push(n.normalizeValue(e));}):this.headersMap[o].push(n.normalizeValue(t));},e.prototype.set=function(e,t){var r=n.normalizeName(e);if(Array.isArray(t)){var o=[];t.forEach(function(e){o.push(n.normalizeValue(e));}),this.headersMap[r]=o;}else this.headersMap[r]=[n.normalizeValue(t)];},e.prototype.has=function(e,t){var r=this.headersMap[n.normalizeName(e)];if(!Array.isArray(r))return !1;if(void 0!==t){var o=n.normalizeValue(t);return r.indexOf(o)>=0}return !0},e.prototype.get=function(e){var t=this.headersMap[n.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(r){e(r,t.headersMap[r]);},this);},e.prototype.toHeaders=function(){if(\"undefined\"!=typeof Headers){var e=new Headers;return this.forEach(function(t,r){r.forEach(function(r){e.append(t,r);});}),e}throw new Error(\"Headers class is not defined\")},e}();t.BrowserHeaders=o;},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0);t.BrowserHeaders=n.BrowserHeaders;},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0}),t.iterateHeaders=function(e,t){for(var r=e[Symbol.iterator](),n=r.next();!n.done;)t(n.value[0]),n=r.next();},t.iterateHeadersKeys=function(e,t){for(var r=e.keys(),n=r.next();!n.done;)t(n.value),n=r.next();};},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2);function o(e){return e}t.normalizeName=function(e){if(\"string\"!=typeof e&&(e=String(e)),/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(e))throw new TypeError(\"Invalid character in header field name\");return e.toLowerCase()},t.normalizeValue=function(e){return \"string\"!=typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var r=o(e);if(r instanceof Headers&&r.getAll)return r.getAll(t);var n=r.get(t);return n&&\"string\"==typeof n?[n]:n},t.getHeaderKeys=function(e){var t=o(e),r={},s=[];return t.keys?n.iterateHeadersKeys(t,function(e){r[e]||(r[e]=!0,s.push(e));}):t.forEach?t.forEach(function(e,t){r[t]||(r[t]=!0,s.push(t));}):n.iterateHeaders(t,function(e){var t=e[0];r[t]||(r[t]=!0,s.push(t));}),s},t.splitHeaderValue=function(e){var t=[];return e.split(\", \").forEach(function(e){e.split(\",\").forEach(function(e){t.push(e);});}),t};}])},e.exports=n();},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(5),o=function(e){return n.CrossBrowserHttpTransport({withCredentials:!1})(e)};t.setDefaultTransportFactory=function(e){o=e;},t.makeDefaultTransport=function(e){return o(e)};},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(6),o=r(7);t.CrossBrowserHttpTransport=function(e){if(n.detectFetchSupport()){var t={credentials:e.withCredentials?\"include\":\"same-origin\"};return n.FetchReadableStreamTransport(t)}return o.XhrTransport({withCredentials:e.withCredentials})};},function(e,t,r){var n=this&&this.__assign||function(){return (n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),s=r(1);t.FetchReadableStreamTransport=function(e){return function(t){return function(e,t){return e.debug&&s.debug(\"fetchRequest\",e),new i(e,t)}(t,e)}};var i=function(){function e(e,t){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=e,this.init=t;}return e.prototype.pump=function(e,t){var r=this;if(this.reader=e,this.cancelled)return this.options.debug&&s.debug(\"Fetch.pump.cancel at first pump\"),void this.reader.cancel();this.reader.read().then(function(e){if(e.done)return r.options.onEnd(),t;r.options.onChunk(e.value),r.pump(r.reader,t);}).catch(function(e){r.cancelled?r.options.debug&&s.debug(\"Fetch.catch - request cancelled\"):(r.cancelled=!0,r.options.debug&&s.debug(\"Fetch.catch\",e.message),r.options.onEnd(e));});},e.prototype.send=function(e){var t=this;fetch(this.options.url,n({},this.init,{headers:this.metadata.toHeaders(),method:\"POST\",body:e,signal:this.controller&&this.controller.signal})).then(function(e){if(t.options.debug&&s.debug(\"Fetch.response\",e),t.options.onHeaders(new o.Metadata(e.headers),e.status),!e.body)return e;t.pump(e.body.getReader(),e);}).catch(function(e){t.cancelled?t.options.debug&&s.debug(\"Fetch.catch - request cancelled\"):(t.cancelled=!0,t.options.debug&&s.debug(\"Fetch.catch\",e.message),t.options.onEnd(e));});},e.prototype.sendMessage=function(e){this.send(e);},e.prototype.finishSend=function(){},e.prototype.start=function(e){this.metadata=e;},e.prototype.cancel=function(){this.cancelled?this.options.debug&&s.debug(\"Fetch.abort.cancel already cancelled\"):(this.cancelled=!0,this.reader?(this.options.debug&&s.debug(\"Fetch.abort.cancel\"),this.reader.cancel()):this.options.debug&&s.debug(\"Fetch.abort.cancel before reader\"),this.controller&&this.controller.abort());},e}();t.detectFetchSupport=function(){return \"undefined\"!=typeof Response&&Response.prototype.hasOwnProperty(\"body\")&&\"function\"==typeof Headers};},function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return (n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);})(e,t)},function(e,t){function r(){this.constructor=e;}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r);});Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(0),i=r(1),a=r(11);t.XhrTransport=function(e){return function(t){if(a.detectMozXHRSupport())return new d(t,e);if(a.detectXHROverrideMimeTypeSupport())return new u(t,e);throw new Error(\"This environment's XHR implementation cannot support binary transfer.\")}};var u=function(){function e(e,t){this.options=e,this.init=t;}return e.prototype.onProgressEvent=function(){this.options.debug&&i.debug(\"XHR.onProgressEvent.length: \",this.xhr.response.length);var e=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var t=p(e);this.options.onChunk(t);},e.prototype.onLoadEvent=function(){this.options.debug&&i.debug(\"XHR.onLoadEvent\"),this.options.onEnd();},e.prototype.onStateChange=function(){this.options.debug&&i.debug(\"XHR.onStateChange\",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new s.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status);},e.prototype.sendMessage=function(e){this.xhr.send(e);},e.prototype.finishSend=function(){},e.prototype.start=function(e){var t=this;this.metadata=e;var r=new XMLHttpRequest;this.xhr=r,r.open(\"POST\",this.options.url),this.configureXhr(),this.metadata.forEach(function(e,t){r.setRequestHeader(e,t.join(\", \"));}),r.withCredentials=Boolean(this.init.withCredentials),r.addEventListener(\"readystatechange\",this.onStateChange.bind(this)),r.addEventListener(\"progress\",this.onProgressEvent.bind(this)),r.addEventListener(\"loadend\",this.onLoadEvent.bind(this)),r.addEventListener(\"error\",function(e){t.options.debug&&i.debug(\"XHR.error\",e),t.options.onEnd(e.error);});},e.prototype.configureXhr=function(){this.xhr.responseType=\"text\",this.xhr.overrideMimeType(\"text/plain; charset=x-user-defined\");},e.prototype.cancel=function(){this.options.debug&&i.debug(\"XHR.abort\"),this.xhr.abort();},e}();t.XHR=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.configureXhr=function(){this.options.debug&&i.debug(\"MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'\"),this.xhr.responseType=\"moz-chunked-arraybuffer\";},t.prototype.onProgressEvent=function(){var e=this.xhr.response;this.options.debug&&i.debug(\"MozXHR.onProgressEvent: \",new Uint8Array(e)),this.options.onChunk(new Uint8Array(e));},t}(u);function c(e,t){var r=e.charCodeAt(t);if(r>=55296&&r<=56319){var n=e.charCodeAt(t+1);n>=56320&&n<=57343&&(r=65536+(r-55296<<10)+(n-56320));}return r}function p(e){for(var t=new Uint8Array(e.length),r=0,n=0;n<e.length;n++){var o=String.prototype.codePointAt?e.codePointAt(n):c(e,n);t[r++]=255&o;}return t}t.MozChunkedArrayBufferXHR=d,t.stringToArrayBuffer=p;},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(0),s=function(e){return 9===e||10===e||13===e};function i(e){return s(e)||e>=32&&e<=126}function a(e){for(var t=0;t!==e.length;++t)if(!i(e[t]))throw new Error(\"Metadata is not valid (printable) ASCII\");return String.fromCharCode.apply(String,Array.prototype.slice.call(e))}function u(e){return 128==(128&e.getUint8(0))}function d(e){return e.getUint32(1,!1)}function c(e,t,r){return e.byteLength-t>=r}function p(e,t,r){if(e.slice)return e.slice(t,r);var n=e.length;void 0!==r&&(n=r);for(var o=new Uint8Array(n-t),s=0,i=t;i<n;i++)o[s++]=e[i];return o}t.decodeASCII=a,t.encodeASCII=function(e){for(var t=new Uint8Array(e.length),r=0;r!==e.length;++r){var n=e.charCodeAt(r);if(!i(n))throw new Error(\"Metadata contains invalid ASCII\");t[r]=n;}return t},function(e){e[e.MESSAGE=1]=\"MESSAGE\",e[e.TRAILERS=2]=\"TRAILERS\";}(n=t.ChunkType||(t.ChunkType={}));var h=function(){function e(){this.buffer=null,this.position=0;}return e.prototype.parse=function(e,t){if(0===e.length&&t)return [];var r,s=[];if(null==this.buffer)this.buffer=e,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=e,this.position=0;else {var i=this.buffer.byteLength-this.position,h=new Uint8Array(i+e.byteLength),f=p(this.buffer,this.position);h.set(f,0);var l=new Uint8Array(e);h.set(l,i),this.buffer=h,this.position=0;}for(;;){if(!c(this.buffer,this.position,5))return s;var g=p(this.buffer,this.position,this.position+5),b=new DataView(g.buffer,g.byteOffset,g.byteLength),y=d(b);if(!c(this.buffer,this.position,5+y))return s;var v=p(this.buffer,this.position+5,this.position+5+y);if(this.position+=5+y,u(b))return s.push({chunkType:n.TRAILERS,trailers:(r=v,new o.Metadata(a(r)))}),s;s.push({chunkType:n.MESSAGE,data:v});}},e}();t.ChunkParser=h;},function(e,t,r){var n;Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e[e.OK=0]=\"OK\",e[e.Canceled=1]=\"Canceled\",e[e.Unknown=2]=\"Unknown\",e[e.InvalidArgument=3]=\"InvalidArgument\",e[e.DeadlineExceeded=4]=\"DeadlineExceeded\",e[e.NotFound=5]=\"NotFound\",e[e.AlreadyExists=6]=\"AlreadyExists\",e[e.PermissionDenied=7]=\"PermissionDenied\",e[e.ResourceExhausted=8]=\"ResourceExhausted\",e[e.FailedPrecondition=9]=\"FailedPrecondition\",e[e.Aborted=10]=\"Aborted\",e[e.OutOfRange=11]=\"OutOfRange\",e[e.Unimplemented=12]=\"Unimplemented\",e[e.Internal=13]=\"Internal\",e[e.Unavailable=14]=\"Unavailable\",e[e.DataLoss=15]=\"DataLoss\",e[e.Unauthenticated=16]=\"Unauthenticated\";}(n=t.Code||(t.Code={})),t.httpStatusToCode=function(e){switch(e){case 0:return n.Internal;case 200:return n.OK;case 400:return n.InvalidArgument;case 401:return n.Unauthenticated;case 403:return n.PermissionDenied;case 404:return n.NotFound;case 409:return n.Aborted;case 412:return n.FailedPrecondition;case 429:return n.ResourceExhausted;case 499:return n.Canceled;case 500:return n.Unknown;case 501:return n.Unimplemented;case 503:return n.Unavailable;case 504:return n.DeadlineExceeded;default:return n.Unknown}};},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=r(4),s=r(6),i=r(12),a=r(7),u=r(5),d=r(9),c=r(13),p=r(15),h=r(2);!function(e){e.setDefaultTransport=o.setDefaultTransportFactory,e.CrossBrowserHttpTransport=u.CrossBrowserHttpTransport,e.FetchReadableStreamTransport=s.FetchReadableStreamTransport,e.XhrTransport=a.XhrTransport,e.WebsocketTransport=i.WebsocketTransport,e.Code=d.Code,e.Metadata=n.BrowserHeaders,e.client=function(e,t){return h.client(e,t)},e.invoke=c.invoke,e.unary=p.unary;}(t.grpc||(t.grpc={}));},function(e,t,r){var n;function o(){if(void 0!==n)return n;if(XMLHttpRequest){n=new XMLHttpRequest;try{n.open(\"GET\",\"https://localhost\");}catch(e){}}return n}function s(e){var t=o();if(!t)return !1;try{return t.responseType=e,t.responseType===e}catch(e){}return !1}Object.defineProperty(t,\"__esModule\",{value:!0}),t.xhrSupportsResponseType=s,t.detectMozXHRSupport=function(){return \"undefined\"!=typeof XMLHttpRequest&&s(\"moz-chunked-arraybuffer\")},t.detectXHROverrideMimeTypeSupport=function(){return \"undefined\"!=typeof XMLHttpRequest&&XMLHttpRequest.prototype.hasOwnProperty(\"overrideMimeType\")};},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n,o=r(1),s=r(8);!function(e){e[e.FINISH_SEND=1]=\"FINISH_SEND\";}(n||(n={}));var i=new Uint8Array([1]);t.WebsocketTransport=function(){return function(e){return function(e){e.debug&&o.debug(\"websocketRequest\",e);var t,r=function(e){if(\"https://\"===e.substr(0,8))return \"wss://\"+e.substr(8);if(\"http://\"===e.substr(0,7))return \"ws://\"+e.substr(7);throw new Error(\"Websocket transport constructed with non-https:// or http:// host.\")}(e.url),a=[];function u(e){if(e===n.FINISH_SEND)t.send(i);else {var r=e,o=new Int8Array(r.byteLength+1);o.set(new Uint8Array([0])),o.set(r,1),t.send(o);}}return {sendMessage:function(e){t&&t.readyState!==t.CONNECTING?u(e):a.push(e);},finishSend:function(){t&&t.readyState!==t.CONNECTING?u(n.FINISH_SEND):a.push(n.FINISH_SEND);},start:function(n){(t=new WebSocket(r,[\"grpc-websockets\"])).binaryType=\"arraybuffer\",t.onopen=function(){var r;e.debug&&o.debug(\"websocketRequest.onopen\"),t.send((r=\"\",n.forEach(function(e,t){r+=e+\": \"+t.join(\", \")+\"\\r\\n\";}),s.encodeASCII(r))),a.forEach(function(e){u(e);});},t.onclose=function(t){e.debug&&o.debug(\"websocketRequest.onclose\",t),e.onEnd();},t.onerror=function(t){e.debug&&o.debug(\"websocketRequest.onerror\",t);},t.onmessage=function(t){e.onChunk(new Uint8Array(t.data));};},cancel:function(){e.debug&&o.debug(\"websocket.abort\"),t.close();}}}(e)}};},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2);t.invoke=function(e,t){if(e.requestStream)throw new Error(\".invoke cannot be used with client-streaming methods. Use .client instead.\");var r=n.client(e,{host:t.host,transport:t.transport,debug:t.debug});return t.onHeaders&&r.onHeaders(t.onHeaders),t.onMessage&&r.onMessage(t.onMessage),t.onEnd&&r.onEnd(t.onEnd),r.start(t.metadata),r.send(t.request),r.finishSend(),{close:function(){r.close();}}};},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0}),t.frameRequest=function(e){var t=e.serializeBinary(),r=new ArrayBuffer(t.byteLength+5);return new DataView(r,1,4).setUint32(0,t.length,!1),new Uint8Array(r,5).set(t),new Uint8Array(r)};},function(e,t,r){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),o=r(2);t.unary=function(e,t){if(e.responseStream)throw new Error(\".unary cannot be used with server-streaming methods. Use .invoke or .client instead.\");if(e.requestStream)throw new Error(\".unary cannot be used with client-streaming methods. Use .client instead.\");var r=null,s=null,i=o.client(e,{host:t.host,transport:t.transport,debug:t.debug});return i.onHeaders(function(e){r=e;}),i.onMessage(function(e){s=e;}),i.onEnd(function(e,o,i){t.onEnd({status:e,statusMessage:o,headers:r||new n.Metadata,message:s,trailers:i});}),i.start(t.metadata),i.send(t.request),i.finishSend(),{close:function(){i.close();}}};}])});\n});\n\nconst errors = {\n    /**\n     * expirationError is an error your app will receive anytime your credentials have expired.\n     * @public\n     */\n    expirationError: new Error('Auth expired. Consider calling withKeyInfo or withAPISig to refresh.'),\n};\nconst defaultHost = 'https://webapi.hub.textile.io';\n/**\n * Context provides context management for gRPC credentials and config settings.\n * It is the default implementation for the ContextInterface interface.\n */\nclass Context {\n    /**\n     * Construct a new Context object.\n     * @param host The remote gRPC host. This input exists to comply with the Config interface.\n     */\n    constructor(host = defaultHost) {\n        // Internal context variables\n        this._context = {};\n        this._context['host'] = host;\n    }\n    static fromUserAuth(auth, host = defaultHost) {\n        const ctx = new Context(host);\n        const { key, token } = auth, sig = __rest(auth, [\"key\", \"token\"]);\n        return ctx.withAPIKey(key).withAPISig(sig).withToken(token);\n    }\n    static fromUserAuthCallback(authCallback, host = defaultHost) {\n        const ctx = new Context(host);\n        // @todo: Should we now callback right away?\n        ctx.authCallback = authCallback;\n        return ctx;\n    }\n    get host() {\n        return this._context['host'];\n    }\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    set(key, value) {\n        this._context[key] = value;\n        return this;\n    }\n    get(key) {\n        return this._context[key];\n    }\n    withSession(value) {\n        if (value === undefined)\n            return this;\n        this._context['x-textile-session'] = value;\n        return this;\n    }\n    withThread(value) {\n        if (value === undefined)\n            return this;\n        this._context['x-textile-thread'] = value.toString();\n        return this;\n    }\n    withThreadName(value) {\n        if (value === undefined)\n            return this;\n        this._context['x-textile-thread-name'] = value;\n        return this;\n    }\n    withOrg(value) {\n        if (value === undefined)\n            return this;\n        this._context['x-textile-org'] = value;\n        return this;\n    }\n    withToken(value) {\n        if (value === undefined)\n            return this;\n        this._context['authorization'] = `bearer ${value}`;\n        return this;\n    }\n    withAPIKey(value) {\n        if (value === undefined)\n            return this;\n        this._context['x-textile-api-key'] = value;\n        return this;\n    }\n    withAPISig(value) {\n        if (value === undefined)\n            return this;\n        const { sig, msg } = value;\n        this._context['x-textile-api-sig-msg'] = msg;\n        this._context['x-textile-api-sig'] = sig;\n        return this;\n    }\n    withKeyInfo(key, date) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (key === undefined)\n                return this;\n            // Enables the use of insecure / non-signing keys\n            if (!key.secret)\n                return this.withAPIKey(key.key);\n            const sig = yield createAPISig(key.secret, date);\n            return this.withAPIKey(key.key).withAPISig(sig);\n        });\n    }\n    withContext(value) {\n        if (value === undefined)\n            return this;\n        this._context = Object.assign(Object.assign({}, this._context), value.toJSON());\n        return this;\n    }\n    /**\n     * Returns true if this Context contains an api sig msg, and that msg has expired, or if\n     * it does _not_ have an api sig msg, but it _does_ have an auth callback.\n     */\n    get isExpired() {\n        const msg = this.get('x-textile-api-sig-msg');\n        const notAuthed = msg === undefined && this.authCallback !== undefined;\n        const isExpired = msg !== undefined && new Date(msg) <= new Date();\n        return isExpired || notAuthed;\n    }\n    /**\n     * Refresh user auth with provided callback.\n     * If callback is not specified, attempts to use existing callback specified at initialization.\n     */\n    refreshUserAuth(authCallback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // If we have a new one, use it...\n            if (authCallback !== undefined) {\n                this.authCallback = authCallback;\n            }\n            // If we still don't have a callback, throw...\n            if (this.authCallback === undefined) {\n                throw new Error('Missing authCallback. See Context.fromUserAuthCallback for details.');\n            }\n            // Now do the renewal and return self...\n            const _a = yield this.authCallback(), { key, token } = _a, sig = __rest(_a, [\"key\", \"token\"]);\n            return this.withAPIKey(key).withAPISig(sig).withToken(token);\n        });\n    }\n    /**\n     * Convert Context to plain JSON object.\n     * @throws If this Context has expired.\n     * @see toMetadata for an alternative for gRPC clients that supports auto-renewal.\n     */\n    toJSON() {\n        const json = Object.assign({}, this._context);\n        // If we're expired, throw...\n        if (this.isExpired) {\n            throw errors.expirationError;\n        }\n        return json;\n    }\n    /**\n     * Convert Context to grpc Metadata object.\n     * Will automatically call the auth callback if available.\n     * @param ctx Additional context object that will be merged with this prior to conversion.\n     * @see toJSON for an alternative that returns a plain object, and throws when expired.\n     */\n    toMetadata(ctx) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const context = new Context();\n            if (this.isExpired && this.authCallback !== undefined) {\n                const _a = yield this.authCallback(), { key, token } = _a, sig = __rest(_a, [\"key\", \"token\"]);\n                // We do want to mutate this here because we want to update our auth sig\n                this.withAPIKey(key).withAPISig(sig).withToken(token);\n            }\n            // We merge this context and ctx with the empty context so as to avoid mutating this with ctx\n            return new grpcWebClient_umd.grpc.Metadata(context.withContext(this).withContext(ctx).toJSON());\n        });\n    }\n    /**\n     * Import various ContextInterface API properties from JSON.\n     * @param json The JSON object.\n     * @param host Optional host string.\n     */\n    static fromJSON(json, host = defaultHost) {\n        const newContext = Object.assign({}, json);\n        newContext['host'] = host;\n        const ctx = new Context();\n        ctx._context = newContext;\n        return ctx;\n    }\n}\n\nexport { Context, defaultHost, errors };\n"]},"metadata":{},"sourceType":"module"}