{"ast":null,"code":"var _jsxFileName = \"/Users/wiki/code/apiece/src/views/app/App.js\";\nimport './App.css';\nimport * as React from \"react\";\nimport { getLocalUserIdentity } from \"../../common/user\";\nimport { bucketLinks, getBucketKey } from \"../../common/bucket\";\nimport Landing from \"./Landing\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userIdentity: null,\n      loadingUserIdentity: false\n    };\n  }\n\n  async componentWillMount() {\n    const localUserIdentity = await getLocalUserIdentity();\n    this.setState({\n      userIdentity: localUserIdentity\n    });\n\n    if (localUserIdentity != null) {\n      const {\n        bucketKey,\n        buckets\n      } = await getBucketKey(localUserIdentity);\n      const links = await bucketLinks(buckets, bucketKey);\n      const query = {\n        bucketKey: bucketKey,\n        buckets: buckets,\n        links: links\n      };\n      this.props.history.push({\n        pathname: \"/dashBoard\",\n        query: query\n      });\n    } else {\n      let loading = document.getElementById('loader');\n\n      if (!loading) {\n        return;\n      }\n\n      loading.style.display = 'inline-block';\n      loading.style.display = 'none';\n      this.setState({\n        loadingUserIdentity: true\n      });\n    }\n  }\n\n  render() {\n    if (this.state.loadingUserIdentity) {\n      if (this.state.userIdentity == null) {\n        return /*#__PURE__*/_jsxDEV(Landing, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 24\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this);\n      }\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/wiki/code/apiece/src/views/app/App.js"],"names":["React","getLocalUserIdentity","bucketLinks","getBucketKey","Landing","App","Component","constructor","props","state","userIdentity","loadingUserIdentity","componentWillMount","localUserIdentity","setState","bucketKey","buckets","links","query","history","push","pathname","loading","document","getElementById","style","display","render"],"mappings":";AAAA,OAAO,WAAP;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAAQC,oBAAR,QAAmC,mBAAnC;AACA,SAAQC,WAAR,EAAqBC,YAArB,QAAwC,qBAAxC;AACA,OAAOC,OAAP,MAAoB,WAApB;;;AAEA,MAAMC,GAAN,SAAoBL,KAAK,CAACM,SAA1B,CAAmC;AAC/BC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,YAAY,EAAG,IADN;AAETC,MAAAA,mBAAmB,EAAG;AAFb,KAAb;AAIH;;AAEuB,QAAlBC,kBAAkB,GAAG;AACvB,UAAMC,iBAAiB,GAAG,MAAMZ,oBAAoB,EAApD;AACA,SAAKa,QAAL,CAAc;AACNJ,MAAAA,YAAY,EAACG;AADP,KAAd;;AAIA,QAAGA,iBAAiB,IAAE,IAAtB,EAA2B;AACvB,YAAM;AAACE,QAAAA,SAAD;AAAYC,QAAAA;AAAZ,UAAuB,MAAMb,YAAY,CAACU,iBAAD,CAA/C;AACA,YAAMI,KAAK,GAAG,MAAMf,WAAW,CAACc,OAAD,EAASD,SAAT,CAA/B;AACA,YAAMG,KAAK,GAAG;AACVH,QAAAA,SAAS,EAACA,SADA;AAEVC,QAAAA,OAAO,EAACA,OAFE;AAGVC,QAAAA,KAAK,EAACA;AAHI,OAAd;AAKA,WAAKT,KAAL,CAAWW,OAAX,CAAmBC,IAAnB,CAAwB;AAACC,QAAAA,QAAQ,EAAE,YAAX;AAAwBH,QAAAA,KAAK,EAAGA;AAAhC,OAAxB;AACH,KATD,MASK;AACD,UAAII,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAd;;AACA,UAAI,CAACF,OAAL,EAAc;AACV;AACH;;AACDA,MAAAA,OAAO,CAACG,KAAR,CAAcC,OAAd,GAAsB,cAAtB;AAEAJ,MAAAA,OAAO,CAACG,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACA,WAAKZ,QAAL,CAAc;AACVH,QAAAA,mBAAmB,EAAC;AADV,OAAd;AAGH;AACJ;;AAEDgB,EAAAA,MAAM,GAAG;AACL,QAAI,KAAKlB,KAAL,CAAWE,mBAAf,EAAoC;AAChC,UAAI,KAAKF,KAAL,CAAWC,YAAX,IAA2B,IAA/B,EAAqC;AACjC,4BAAO,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,gBAAP;AACH,OAFD,MAEO;AACH,4BACI;AAAA;AAAA;AAAA;AAAA,gBADJ;AAGH;AACJ,KARD,MAQO;AACH,0BACI;AAAA;AAAA;AAAA;AAAA,cADJ;AAGH;AACJ;;AApD8B;;AAwDnC,eAAeL,GAAf","sourcesContent":["import './App.css';\nimport * as React from \"react\";\nimport {getLocalUserIdentity} from \"../../common/user\";\nimport {bucketLinks, getBucketKey} from \"../../common/bucket\";\nimport Landing from \"./Landing\";\n\nclass App  extends  React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            userIdentity : null,\n            loadingUserIdentity : false\n        }\n    }\n\n    async componentWillMount() {\n        const localUserIdentity = await getLocalUserIdentity();\n        this.setState({\n                userIdentity:localUserIdentity\n            }\n        );\n        if(localUserIdentity!=null){\n            const {bucketKey, buckets} = await getBucketKey(localUserIdentity);\n            const links = await bucketLinks(buckets,bucketKey);\n            const query = {\n                bucketKey:bucketKey,\n                buckets:buckets,\n                links:links,\n            };\n            this.props.history.push({pathname: \"/dashBoard\",query : query})\n        }else{\n            let loading = document.getElementById('loader');\n            if (!loading) {\n                return;\n            }\n            loading.style.display='inline-block';\n\n            loading.style.display = 'none';\n            this.setState({\n                loadingUserIdentity:true\n            })\n        }\n    }\n\n    render() {\n        if (this.state.loadingUserIdentity) {\n            if (this.state.userIdentity == null) {\n                return <Landing/>\n            } else {\n                return (\n                    <div/>\n                );\n            }\n        } else {\n            return (\n                <div/>\n            );\n        }\n    }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}